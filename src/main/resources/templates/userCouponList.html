<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Coupon List</title>
    <script>
        // 쿠폰 목록을 가져오는 함수
        function fetchCouponList() {
            const userId = document.getElementById('userId').value;
            if (!userId) {
                alert("사용자 ID를 입력해주세요.");
                return;
            }

            // 사용자 쿠폰 목록 API 호출
            fetch(`/couponList/${userId}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
            })
                .then(response => response.json())
                .then(data => {
                    // 쿠폰 목록을 화면에 표시
                    const couponList = document.getElementById('couponList');
                    couponList.innerHTML = ''; // 기존 목록을 초기화

                    if (data.length === 0) {
                        couponList.innerHTML = '<li>쿠폰이 없습니다.</li>';
                    } else {
                        data.forEach(coupon => {
                            const listItem = document.createElement('li');
                            listItem.textContent = `발급일: ${coupon.code}
                                                    , 종료일: ${coupon.policyId}
                                                    , 쿠폰 정책: `;


                            couponList.appendChild(listItem);
                        });
                    }
                })
                .catch(error => {
                    console.error('쿠폰 목록을 가져오는 중 오류가 발생했습니다.', error);
                    alert('쿠폰 목록을 가져오는 중 오류가 발생했습니다.');
                });
        }
    </script>
</head>
<body>

<h1>사용자 쿠폰 목록</h1>

<!-- 사용자 ID 입력 폼 -->
<div>
    <label for="userId">사용자 ID 입력:</label>
    <input type="number" id="userId" placeholder="사용자 ID">
    <button onclick="fetchCouponList()">쿠폰 목록 가져오기</button>
</div>

<!-- 쿠폰 목록을 출력할 영역 -->
<h2>쿠폰 목록:</h2>
<ul id="couponList">
    <!-- 쿠폰 목록이 여기에 동적으로 추가됩니다 -->
</ul>

</body>
</html>